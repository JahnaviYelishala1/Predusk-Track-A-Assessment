generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Profile {
  id        String  @id @default(uuid())
  name      String
  email     String
  education String
  summary   String?
  github    String?
  linkedin  String?
  portfolio String?

  skills   ProfileSkill[]
  projects ProfileProject[]
  work     ProfileWork[]
}

model Skill {
  id   String @id @default(uuid())
  name String @unique

  profiles ProfileSkill[]
}

model Project {
  id          String  @id @default(uuid())
  title       String
  description String
  links       String? // JSON stored as STRING (SQLite-safe)

  profiles ProfileProject[]
}

model Work {
  id          String @id @default(uuid())
  company     String
  role        String
  description String

  profiles ProfileWork[]
}

model ProfileSkill {
  profileId String
  skillId   String

  profile Profile @relation(fields: [profileId], references: [id])
  skill   Skill   @relation(fields: [skillId], references: [id])

  @@id([profileId, skillId])
}

model ProfileProject {
  profileId String
  projectId String

  profile Profile @relation(fields: [profileId], references: [id])
  project Project @relation(fields: [projectId], references: [id])

  @@id([profileId, projectId])
}

model ProfileWork {
  profileId String
  workId    String

  profile Profile @relation(fields: [profileId], references: [id])
  work    Work    @relation(fields: [workId], references: [id])

  @@id([profileId, workId])
}
